DRONE_SERVER_HOST: "{{ drone_domain }}"
DRONE_SERVER_PROTO: https

DRONE_TLS_AUTOCERTS: "true"
DRONE_LOGS_DEBUG: "true"

# runner
DRONE_AGENTS_ENABLED: "true"
DRONE_RPC_HOST: "{{ drone_domain }}"
DRONE_RPC_SECRET: "{{ drone_rpc_secret }}"
DRONE_RPC_PROTO: https

DRONE_USER_FILTER: "{{ drone_users }}"

# database
DRONE_DATABASE_DRIVER: postgres
DRONE_DATABASE_DATASOURCE: postgres://{{ drone_database_user }}:{{ drone_database_password }}@{{ drone_database_uri }}:{{ drone_database_port }}/{{ drone_database_name }}?sslmode=disable

{% if drone_github_enabled %}
# github
DRONE_GITHUB_CLIENT_ID: "{{ drone_github_client_id }}"
DRONE_GITHUB_CLIENT_SECRET: "{{ drone_github_client_secret }}"
DRONE_GITHUB_SKIP_VERIFY: "true"
{% endif %}

{% if drone_gitea_enabled %}
# gitea
DRONE_GITEA_CLIENT_ID: "{{ drone_gitea_client_id }}"
DRONE_GITEA_CLIENT_SECRET: "{{ drone_gitea_client_secret }}"
DRONE_GITEA_SERVER: "{{ drone_gitea_server }}"
{% endif %}

{% if drone_gitlab_enabled %}
# gitlab
DRONE_GITLAB_CLIENT_ID: "{{ drone_gitlab_client_id }}"
DRONE_GITLAB_CLIENT_SECRET: "{{ drone_gitlab_client_secret }}"
DRONE_GITLAB_SERVER: "{{ drone_gitlab_server }}"
{% endif %}
